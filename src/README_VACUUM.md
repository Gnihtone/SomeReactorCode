# Распределенная система управления вакуумными реакторами GTNH

Современная система управления вакуумными реакторами с архитектурой клиент-сервер для GregTech New Horizons.

## Особенности системы

### 🌟 Ключевые возможности

- **Распределенная архитектура**: Главный сервер и множество клиентов
- **Беспроводная связь**: Использование беспроводных сетей и реле
- **Аварийное охлаждение**: Автоматическая замена всех компонентов на охлаждающие вентиляторы при перегреве
- **Удаленное управление**: Управление всеми реакторами с одного сервера
- **Мониторинг в реальном времени**: Отображение статуса всех реакторов на одном экране
- **Автоматическое восстановление**: После аварийного охлаждения система восстанавливает исходную схему

### ⚡ Аварийное охлаждение

При достижении критической температуры (85%):
1. Реактор немедленно останавливается
2. Все компоненты извлекаются в ME систему
3. Устанавливаются охлаждающие элементы (Overclocked Heat Vent)
4. После охлаждения схема автоматически восстанавливается

## Архитектура системы

```
┌─────────────────┐     Беспроводная сеть      ┌─────────────────┐
│  Главный сервер │ ◄──────────────────────────► │ Клиент реактора │
│  (vacuum_server)│          Реле               │ (vacuum_client) │
│                 │ ◄──────────────────────────► │                 │
│  - Интерфейс    │                             │  - Мониторинг   │
│  - Управление   │ ◄──────────────────────────► │  - Управление   │
│  - Логи         │          ...                │  - Безопасность │
└─────────────────┘                             └─────────────────┘
```

## Установка

### Требования

#### Для сервера:
- Компьютер Tier 3
- Экран Tier 3 (для лучшего отображения)
- Графическая карта Tier 3
- Беспроводная сетевая карта или модем
- Клавиатура

#### Для клиента:
- Компьютер Tier 2+
- Беспроводная сетевая карта или модем
- Transposer
- ME Interface (Applied Energistics 2)
- Подключение к реактору

### Структура файлов

```
/src/
├── vacuum_server.lua    # Главный сервер
├── vacuum_client.lua    # Клиент для реактора
├── vacuum_config.lua    # Конфигурация
├── vacuum_protocol.lua  # Протокол связи
├── vacuum_ui.lua       # Интерфейс сервера
└── README_VACUUM.md    # Эта документация
```

### Установка сервера

1. Скопируйте файлы в папку `/src/` на сервере
2. Убедитесь, что `me_interface.lua` доступен в родительской папке
3. Запустите сервер:
   ```
   cd /src
   vacuum_server
   ```

### Установка клиента

1. Подключите компоненты:
   ```
   [Реактор] <-> [Transposer] <-> [ME Interface] <-> [ME система]
                       |
                  [Компьютер]
   ```

2. Скопируйте файлы в папку `/src/` на клиенте
3. Убедитесь, что `me_interface.lua` доступен в родительской папке
4. Запустите клиента с именем реактора:
   ```
   cd /src
   vacuum_client "Реактор-1"
   ```

## Использование

### Команды сервера

- **[↑↓]** - Прокрутка списка реакторов
- **[1-9]** - Быстрый выбор реактора по номеру
- **[Enter]** - Выбрать реактор
- **[S]** - Запустить выбранный реактор
- **[T]** - Остановить выбранный реактор
- **[E]** - Сбросить аварийный режим
- **[R]** - Обновить список реакторов
- **[Q]** - Выход

### Интерфейс сервера

```
╔═══════════════════════════════════════════════════════════════════╗
║         СИСТЕМА УПРАВЛЕНИЯ ВАКУУМНЫМИ РЕАКТОРАМИ GTNH             ║
╠═══════════════════════════════════════════════════════════════════╣
║ Активных реакторов: 3/5        Общая выработка: 125.6 GEU        ║
║───────────────────────────────────────────────────────────────────║
║ ✓ Реактор-1    Статус: RUNNING   Темп: 4250°C (42.5%)           ║
║   Выход: 2048 EU/t  Эфф: 95.2%   Всего: 45.2 GEU                ║
║   Охлаждение: 24/24  Топливо: 8/8                                ║
║                                                                   ║
║ ⚠ Реактор-2    Статус: WARNING   Темп: 7500°C (75.0%)           ║
║   Выход: 4096 EU/t  Эфф: 89.1%   Всего: 62.1 GEU                ║
║   Охлаждение: 20/24  Топливо: 7/8                                ║
║                                                                   ║
║ ☢ Реактор-3    Статус: EMERGENCY Темп: 1200°C (12.0%)           ║
║   Выход: 0 EU/t     Эфф: 0.0%    Всего: 18.3 GEU                ║
║   АВАРИЙНОЕ ОХЛАЖДЕНИЕ: 45s                                      ║
╠═══════════════════════════════════════════════════════════════════╣
║ ╡ Системные логи ╞                                                ║
║ 14:23:15 [INFO]     Сервер запущен                               ║
║ 14:23:18 [INFO]     Регистрация клиента: Реактор-1               ║
║ 14:25:42 [WARNING]  [Реактор-2] Высокая температура: 72.3%       ║
║ 14:26:10 [CRITICAL] [Реактор-3] АВАРИЙНАЯ ОСТАНОВКА!             ║
╠═══════════════════════════════════════════════════════════════════╣
║ [↑↓] Прокрутка | [S] Старт | [T] Стоп | [E] Сброс | [Q] Выход   ║
╚═══════════════════════════════════════════════════════════════════╝
```

### Статусы реакторов

- **RUNNING** (✓) - Реактор работает нормально
- **STOPPED** (✗) - Реактор остановлен
- **WARNING** (⚠) - Высокая температура (>70%)
- **EMERGENCY** (☢) - Аварийный режим охлаждения
- **OFFLINE** (◌) - Нет связи с клиентом

## Конфигурация

Основные параметры в `vacuum_config.lua`:

```lua
-- Сетевые настройки
config.NETWORK = {
    PORT = 1337,                -- Порт для связи
    RELAY_STRENGTH = 400,       -- Сила сигнала реле
    HEARTBEAT_INTERVAL = 2,     -- Интервал отправки данных
    CONNECTION_TIMEOUT = 10     -- Таймаут потери связи
}

-- Настройки реактора
config.REACTOR = {
    CRITICAL_TEMP_PERCENT = 0.85,   -- Критическая температура (85%)
    WARNING_TEMP_PERCENT = 0.7,     -- Предупреждение (70%)
    EMERGENCY_COOLDOWN_TIME = 60    -- Время охлаждения (секунды)
}
```

## Безопасность

### Автоматические защиты

1. **Контроль температуры**: Аварийная остановка при 85%
2. **Аварийное охлаждение**: Автоматическая установка вентиляторов
3. **Мониторинг связи**: Отображение оффлайн статуса при потере связи
4. **Логирование**: Все критические события записываются

### Рекомендации

- Держите запас Overclocked Heat Vent в ME системе
- Настройте автокрафт охлаждающих элементов
- Используйте реле для увеличения дальности связи
- Регулярно проверяйте логи на наличие предупреждений

## Расширение системы

### Добавление нового реактора

1. Установите компьютер с transposer у реактора
2. Подключите ME Interface
3. Запустите клиента с уникальным именем:
   ```
   vacuum_client "Реактор-N"
   ```

### Увеличение дальности связи

Используйте беспроводные реле (Wireless Relay) между сервером и удаленными реакторами.

## Решение проблем

### Клиент не подключается к серверу

1. Проверьте, что сервер запущен
2. Убедитесь в наличии беспроводной карты
3. Проверьте дальность связи (используйте реле)
4. Убедитесь, что порт 1337 не занят

### Аварийное охлаждение не работает

1. Проверьте наличие Overclocked Heat Vent в ME
2. Убедитесь, что ME Interface подключен правильно
3. Проверьте настройки сторон transposer

### Реактор показывает статус OFFLINE

1. Проверьте работу клиента на компьютере реактора
2. Проверьте беспроводную связь
3. Перезапустите клиента

## Производительность

- Сервер может управлять до 50 реакторами одновременно
- Задержка команд обычно < 0.5 секунды
- Потребление памяти: ~2MB на сервере, ~1MB на клиенте

## Автозапуск

Для автоматического запуска создайте `/autorun.lua`:

**На сервере:**
```lua
shell.execute("/src/vacuum_server.lua")
```

**На клиенте:**
```lua
shell.execute("/src/vacuum_client.lua", "ИмяРеактора")
```

---

Создано для сообщества GTNH с любовью к безопасной ядерной энергетике! 